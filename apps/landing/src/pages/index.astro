---
// Fundations
import BaseLayout from "@/layouts/BaseLayout.astro";
// Sections
import Hero1 from "@/components/heros/Hero1.astro";
import Feature4 from "@/components/features/Feature4.astro";
import Feature2 from "@/components/features/Feature2.astro";
import Pricing1 from "@/components/pricing/Pricing1.astro";
import Cta1 from "@/components/ctas/Cta1.astro";
import Cta2 from "@/components/ctas/Cta2.astro";
// import { SignJWT } from "jose";

// const secret = import.meta.env.THOUGHTBASE_SSO_SECRET;
// const secretKey = new TextEncoder().encode(secret);

// const token = await new SignJWT({
//   id: "demo-user-123",
//   email: "demo@example.com",
//   name: "Demo User",
//   avatarUrl: "https://ui-avatars.com/api/?name=Demo+User&background=random",
//   metadata: {
//     absolute: "legend",
//     pizzasEaten: 10,
//     nested: {
//       key: "value",
//     },
//     array: [1, 2, 3],
//     boolean: true,
//     number: 123,
//     string: "hello",
//     null: null,
//     undefined: undefined,
//     date: new Date(),
//     object: { key: "value" },
//   },
//   revenue: 29,
// })
//   .setProtectedHeader({ alg: "HS256" })
//   .setIssuedAt()
//   .setExpirationTime("2h")
//   .sign(secretKey);
---

<BaseLayout>
  <Hero1 />

  <Cta2 />
  <Feature4 />
  <Pricing1 />
  <Feature2 />
  <Cta1 />
</BaseLayout>

<feedback-widget></feedback-widget>

<script>
  import { initFeedbackWidget } from "@thoughtbase/widget";
  const ORGANIZATION_SLUG = import.meta.env.PUBLIC_ORGANIZATION_SLUG as string;
  const CONVEX_URL = import.meta.env.PUBLIC_CONVEX_URL as string;

  class FeedbackWidget extends HTMLElement {
    constructor() {
      super();

      initFeedbackWidget({
        organizationSlug: ORGANIZATION_SLUG,
        convexUrl: CONVEX_URL,
      });
    }
  }

  customElements.define("feedback-widget", FeedbackWidget);
</script>
