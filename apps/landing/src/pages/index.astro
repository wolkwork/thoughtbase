---
// Fundations
import BaseLayout from "@/layouts/BaseLayout.astro";
// Sections
import Hero1 from "@/components/heros/Hero1.astro";
import Feature4 from "@/components/features/Feature4.astro";
import Feature2 from "@/components/features/Feature2.astro";
import Pricing1 from "@/components/pricing/Pricing1.astro";
import Cta1 from "@/components/ctas/Cta1.astro";
import Cta2 from "@/components/ctas/Cta2.astro";
import { WidgetContainer } from "@thoughtbase/widget";
// import { SignJWT } from "jose";

// const secret = "DLePfZvOs24wxZdn24-Q9AjL7eB7DU0j";
// const secretKey = new TextEncoder().encode(secret);

// const token = await new SignJWT({
//   id: "demo-user-123",
//   email: "demo@example.com",
//   name: "Demo User",
//   avatarUrl: "https://ui-avatars.com/api/?name=Demo+User&background=random",
//   metadata: {
//     absolute: "legend",
//     pizzasEaten: 10,
//     nested: {
//       key: "value",
//     },
//     array: [1, 2, 3],
//     boolean: true,
//     number: 123,
//     string: "hello",
//     null: null,
//     undefined: undefined,
//     date: new Date(),
//     object: { key: "value" },
//   },
//   revenue: 29,
// })
//   .setProtectedHeader({ alg: "HS256" })
//   .setIssuedAt()
//   .setExpirationTime("2h")
//   .sign(secretKey);

const WIDGET_URL = import.meta.env.PUBLIC_WIDGET_URL;
const ORGANIZATION_SLUG = import.meta.env.PUBLIC_ORGANIZATION_SLUG;
---

<BaseLayout>
  <Hero1 />

  <Cta2 />
  <Feature4 />
  <Pricing1 />
  <Feature2 />
  <Cta1 />
</BaseLayout>

<WidgetContainer client:load organizationSlug={ORGANIZATION_SLUG} />

<!-- <script is:inline src={WIDGET_URL}></script>
<script is:inline define:vars={{ ORGANIZATION_SLUG }}>
  window.addEventListener("load", () => {
    if (window.initFeedbackWidget) {
      window.initFeedbackWidget({
        organizationSlug: ORGANIZATION_SLUG,
      });
    }
  });
</script> -->
