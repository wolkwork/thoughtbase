---
export const description = "Pricing section: self-hosted free and Cloud";

// Components
import Text from "@/components/fundations/elements/Text.astro";
import Wrapper from "@/components/fundations/containers/Wrapper.astro";
import Link from "@/components/fundations/elements/Link.astro";

// Icons
import Check from "@/components/fundations/icons/Check.astro";

const SIGNUP_URL = import.meta.env.PUBLIC_APP_URL + "/signup";
const DOCS_URL = import.meta.env.PUBLIC_DOCS_URL || "#";

const pricingOptions = [
  {
    id: "self-hosted",
    cardClass: "bg-sand-50",
    primaryTextColor: "text-base-900",
    secondaryTextColor: "text-base-500",
    featuresBorderColor: "border-base-200",
    title: "Self-hosted",
    priceLabel: "Free",
    description: "Run Thoughtbase wherever you want.",
    button: {
      text: "View docs",
      variant: "default",
      href: DOCS_URL,
    },
    features: [
      { text: "Unlimited tracked users" },
      { text: "Unlimited idea submissions" },
      { text: "Unlimited admins" },
      { text: "Roadmap & changelog" },
      { text: "Full control of your data" },
    ],
  },
  {
    id: "cloud",
    cardClass: "bg-sand-100",
    primaryTextColor: "text-base-900",
    secondaryTextColor: "text-base-500",
    featuresBorderColor: "border-base-200",
    title: "Cloud",
    priceLabel: "$99/month",
    description: "Hosted by us. All features included.",
    button: {
      text: "Start 14-day trial",
      variant: "accent",
      href: SIGNUP_URL,
    },
    features: [
      { text: "Everything in self-hosted" },
      { text: "No setup or maintenance" },
      { text: "Custom domain" },
      { text: "White label" },
      { text: "14-day trial, no credit card required" },
    ],
  },
];
---

<section
  id="pricing-section"
  class="border-t border-base-200 border-dashed scroll-mt-24"
>
  <Wrapper variant="standard" class="pt-40 pb-4">
    <div class="text-center text-balance">
      <Text
        tag="h2"
        variant="displayMD"
        class="font-serif font-medium tracking-tight text-black"
      >
        Transparent pricing
      </Text>
      <Text
        tag="p"
        variant="textBase"
        class="max-w-xl mx-auto mt-4 text-base-500"
      >
        Open-source and free to self-host. Don't want the hassle? Try Cloud with
        a 14-day trial. No credit card required.
      </Text>
    </div>

    <!-- Pricing Cards -->
    <div class="mt-12 grid grid-cols-1 gap-4 md:grid-cols-2 max-w-2xl mx-auto">
      {
        pricingOptions.map((tier) => (
          <div
            class={`flex flex-col h-full justify-between p-4 rounded-xl ${tier.cardClass}`}
          >
            <div class="flex flex-col">
              <Text
                tag="h3"
                variant="textBase"
                class={` font-medium text-base-900 ${tier.primaryTextColor}`}
              >
                {tier.title}
              </Text>
              <Text
                variant="displaySM"
                class={`font-medium flex items-baseline tracking-tighter mt-2 font-serif ${tier.primaryTextColor}`}
              >
                {tier.priceLabel}
              </Text>
              <Text
                tag="p"
                variant="textSM"
                class={`mt-2 ${tier.secondaryTextColor}`}
              >
                {tier.description}
              </Text>

              <div class={`mt-4 pt-4 border-t ${tier.featuresBorderColor}  `}>
                <ul
                  class={`flex flex-col mt-4 text-sm  gap-y-3 ${tier.primaryTextColor}`}
                  role="list"
                >
                  {tier.features.map((feature) => (
                    <li class="flex items-start gap-2">
                      <Check
                        size="sm"
                        class={`shrink-0 ${tier.secondaryTextColor}`}
                      />
                      <span class={feature.soon ? "text-base-500/75" : ""}>
                        {feature.text}{" "}
                        {feature.soon && (
                          <span class="ml-2 text-xs text-base-500 bg-white py-0.5 px-2 rounded-full">
                            Coming soon
                          </span>
                        )}
                      </span>
                    </li>
                  ))}
                </ul>
              </div>
            </div>
            <div class="w-full mt-8">
              <Link
                class="w-full"
                variant={tier.button.variant}
                size="sm"
                href={tier.button.href}
              >
                {tier.button.text}
              </Link>
            </div>
          </div>
        ))
      }
    </div>
  </Wrapper>
</section>
